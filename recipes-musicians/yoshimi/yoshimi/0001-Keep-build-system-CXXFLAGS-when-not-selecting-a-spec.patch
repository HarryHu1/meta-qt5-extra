From 29b79b335f7b2d42e9dbc3fc1c990199325bd1e5 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@gmail.com>
Date: Fri, 11 Jan 2019 22:37:05 +0100
Subject: [PATCH] Keep build system CXXFLAGS when not selecting a specialized
 build
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Cross/sysrooted build environments as Openembedded/Yocto set a lot flags to
tailor builds and usually do a good job selecting the correct flags for the
target machine.
So don't ignore them because it causes nasty build failures.

Upstream-Status: Submitted [1]

[1] https://github.com/Yoshimi/yoshimi/pull/46

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@gmail.com>
---
 src/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 3448d5a7..ba65d9b1 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -317,7 +317,7 @@ else (BuildFor0ld_X86)
                 if (BuildForThisCPU)
                     set (CMAKE_CXX_FLAGS ${BuildOptionsThisCPU})
                 else (BuildForThisCPU)
-                    set (CMAKE_CXX_FLAGS ${BuildOptionsBasic})
+                    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${BuildOptionsBasic}")
                 endif (BuildForThisCPU)
             endif (BuildForNEON)
         endif (BuildForCore2_X86_64)
-- 
2.20.1

