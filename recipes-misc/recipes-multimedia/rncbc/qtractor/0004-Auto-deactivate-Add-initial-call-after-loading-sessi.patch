From 007ec33a6d2ae641b59faa351b455d67b6153c90 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@gmail.com>
Date: Wed, 14 Feb 2018 21:33:43 +0100
Subject: [PATCH] Auto-deactivate: Add initial call after loading session
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Avoid flood of red messages when opening many-track sessions on weak machines.

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@gmail.com>
---
 src/qtractorMainForm.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/src/qtractorMainForm.cpp b/src/qtractorMainForm.cpp
index 5cd1d612..882a8f69 100644
--- a/src/qtractorMainForm.cpp
+++ b/src/qtractorMainForm.cpp
@@ -2522,6 +2522,13 @@ bool qtractorMainForm::loadSessionFileEx (
 	// Now we'll try to create (update) the whole GUI session.
 	updateSessionPost();
 
+	// Do initial auto-deactivate as late as possible to give tracks/plugins
+	// the chance to perform initial program-change events
+	if (m_pSession->isAutoDeactivate()) {
+		m_pSession->stabilize();
+		m_pSession->autoDeactivatePlugins();
+	}
+
 	return bLoadSessionFileEx;
 }
 
-- 
2.14.3

